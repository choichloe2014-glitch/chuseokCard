<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>ğŸŒ• ì¶”ì„ í¸ì§€ ìƒì„±ê¸°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bulma -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <!-- ì¸ì‡„: ì¹´ë“œë§Œ ë³´ì´ê²Œ (BulmaëŠ” ìœ ì§€) -->
    <style>
        @media print {
            body * {
                visibility: hidden !important;
            }

            #printCard,
            #printCard * {
                visibility: visible !important;
            }

            #printCard {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                box-shadow: none;
            }
        }
    </style>
</head>

<body class="has-background-light">
    <section class="section">
        <div class="container">
            <h1 class="title has-text-centered">ğŸŒ• ì¶”ì„ í¸ì§€ ìƒì„±ê¸°</h1>

            <!-- ì…ë ¥ í¼ -->
            <div class="box">
                <div class="field">
                    <label class="label">ë°›ëŠ” ì‚¬ëŒ</label>
                    <div class="control">
                        <input id="to" class="input" type="text" placeholder="ì˜ˆ) í• ë¨¸ë‹ˆ">
                    </div>
                </div>

                <div class="field">
                    <label class="label">ë³´ë‚´ëŠ” ì‚¬ëŒ</label>
                    <div class="control">
                        <input id="from" class="input" type="text" placeholder="ì˜ˆ) ì§€ì˜">
                    </div>
                </div>

                <div class="field">
                    <label class="label">í¸ì§€ í†¤</label>
                    <div class="control">
                        <div class="select">
                            <select id="tone">
                                <option value="warm">ë”°ëœ»í•˜ê²Œ</option>
                                <option value="cheerful">ìœ ì¾Œí•˜ê²Œ</option>
                                <option value="formal">ê²©ì‹ ìˆê²Œ</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">ì†Œì› (ì›í•˜ëŠ” ê²ƒë§Œ ì²´í¬)</label>
                    <div class="control">
                        <label class="checkbox mr-3"><input type="checkbox" class="wish" value="ê±´ê°•"> ê±´ê°•</label>
                        <label class="checkbox mr-3"><input type="checkbox" class="wish" value="í–‰ë³µ"> í–‰ë³µ</label>
                        <label class="checkbox mr-3"><input type="checkbox" class="wish" value="í’ìš”"> í’ìš”</label>
                        <label class="checkbox mr-3"><input type="checkbox" class="wish" value="ì•ˆì „"> ì•ˆì „</label>
                        <label class="checkbox"><input type="checkbox" class="wish" value="ì„±ì¥"> ì„±ì¥</label>
                    </div>
                </div>

                <div class="field">
                    <label class="label">ì¶”ê°€ë¡œ ê¼­ ì „í•˜ê³  ì‹¶ì€ ë§ (ì„ íƒ)</label>
                    <div class="control">
                        <textarea id="extra" class="textarea" placeholder="ì˜ˆ) ì§€ë‚œë²ˆì— ë³´ë‚´ì£¼ì‹  ê³¼ì¼ ì •ë§ ë§›ìˆê²Œ ì˜ ë¨¹ì—ˆì–´ìš”!"></textarea>
                    </div>
                </div>

                <div class="buttons">
                    <button id="makeBtn" class="button is-primary">í¸ì§€ ë§Œë“¤ê¸°</button>
                    <button id="copyBtn" class="button is-link">ë³µì‚¬í•˜ê¸°</button>
                    <button id="printBtn" class="button is-warning">ì¸ì‡„í•˜ê¸°(ì´ë¯¸ì§€+í¸ì§€)</button>
                </div>
            </div>

            <!-- ì¹´ë“œ (ì´ë¯¸ì§€ ì•„ë˜ì— í¸ì§€) -->
            <div class="card" id="printCard">
                <div class="card-image">
                    <figure class="image is-4by3">
                        <img src="https://www.home-learn.co.kr/common/image.do?imgPath=newsroom&imgName=CK20230816093439541.png&imgGubun=D"
                            alt="ì¶”ì„ ë°°ê²½">
                    </figure>
                </div>
                <div class="card-content">
                    <div class="content">
                        <pre id="letter" style="white-space: pre-wrap;">ì—¬ê¸°ì— í¸ì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.</pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ìˆ˜ì—…ì—ì„œ scriptë¥¼ ì±„ì›Œë‚˜ê°‘ë‹ˆë‹¤.-->
    <script>
        // STEPì—ì„œ ì•ˆë‚´í•˜ëŠ” ì½”ë“œë¡œ ì—…ë°ì´íŠ¸í•´ë‚˜ê°€ê¸°
        const openings = {
                warm: [
                    "ë³´ë¦„ë‹¬ì²˜ëŸ¼ ë‘¥ê¸€ê³  ë”°ëœ»í•œ ì¶”ì„ì´ì—ìš”!",
                    "ì˜ ì§€ë‚´ì‹œì£ ? ì˜¤ëœë§Œì´ì—ìš”!",
                    "ë‹¬ë¹›ì²˜ëŸ¼ ë°˜ê°€ìš´ ë§ˆìŒ ì „í•´ìš”!"
                ],
                cheerful: [
                    "ì†¡í¸ ë§›ìˆê²Œ ë“œì‹œë©´ì„œ ì¦ê±°ìš´ ì¶”ì„ ë³´ë‚´ì„¸ìš”!",
                    "ê²Œì„ì²˜ëŸ¼ ì¬ë¯¸ìˆëŠ” ì¶”ì„ ë˜ê¸¸ ë°”ë¼ìš”!",
                    "ì›ƒìŒì†Œë¦¬ ê°€ë“í•œ ëª…ì ˆ ë˜ì„¸ìš”!"
                ],
                formal: [
                    "ì¦ê±°ìš´ ì¶”ì„ ì—°íœ´ ë³´ë‚´ì„¸ìš”!",
                    "ë§›ìˆëŠ” ê±° ë§ì´ ë“œì‹œê³  ê±´ê°•í•˜ì„¸ìš”!",
                    "í–‰ë³µí•œ ì¶”ì„ ë˜ì„¸ìš”!"
                ]
            };

        const bodies = {
            warm: [
                "ë§›ìˆëŠ” ìŒì‹ ë§ì´ ë“œì‹œê³  í‘¹ ì‰¬ì„¸ìš”!",
                "ë³´ê³  ì‹¶ì–´ìš”, ê±´ê°•í•˜ê²Œ ì§€ë‚´ì„¸ìš”!",
                "ì‘ì€ ë§ˆìŒì´ì§€ë§Œ ë”°ëœ»í•˜ê²Œ ì „í•´ìš”."
            ],
            cheerful: [
                "ë§›ë‚œ ì†¡í¸ì€ ì œ ëª«ë„ ê¼­ ë‚¨ê²¨ì£¼ì„¸ìš”!",
                "ì‚¬ì§„ ë§ì´ ì°ì–´ì„œ ë‚˜ì¤‘ì— ë³´ì—¬ì£¼ì„¸ìš”!",
                "ì¦ê±°ì›€ì´ ë“¬ë¿ ë‹´ê¸´ ì¶”ì„ì´ ë˜ê¸¸ ë°”ë¼ìš”!"
            ],
            formal: [
                "ì¶”ì„ ì—°íœ´ ë™ì•ˆ ê°€ì¡±ê³¼ ì¦ê±°ìš´ ì‹œê°„ ë³´ë‚´ì„¸ìš”!",
                "í•­ìƒ ê±´ê°•í•˜ì‹œê³  ì¢‹ì€ ì¼ë§Œ ê°€ë“í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.",
                "ì•ìœ¼ë¡œë„ í–‰ë³µ ê°€ë“í•˜ì‹œê¸¸ ë°”ë˜ìš”!"
            ]
        };

        function pick(arr) {
            const idx = Math.floor(Math.random() * arr.length);
            return arr[idx];
        }

        function today(){
            const now = new Date();

            const year = now.getFullYear();  // 2025
            const month = now.getMonth();    //10
            const date = now.getDate();    //1

            return year + 'ë…„ ' + month + 'ì›” ' + date +'ì¼ ';
        }

        function buildLetter() {
            const to = document.getElementById('to').value || "ê°€ì¡±ë¶„ë“¤";
            const from = document.getElementById('from').value || "ì§€ì˜";
            const tone = document.getElementById('tone').value; 
            const extra = document.getElementById('extra').value;

           
            const boxes = document.querySelectorAll('.wish:checked');
            let wishes = [];

           
            for (let i = 0; i < boxes.length; i++) {
                wishes.push(boxes[i].value);
            }

          
            const opening = pick(openings[tone]);
            const body = pick(bodies[tone]);

            let wishline = '';
            if (wishes.length > 0 ) {
                wishline = 'ì´ë²ˆ ì¶”ì„ì—ëŠ” ' +wishes.join(', ') + ' ê°€ë“í•˜ì‹œê¸¸ ë°”ë¼ìš”!';
            } else {
                wishline = 'ì´ë²ˆ ì¶”ì„ì—ëŠ” í–‰ë³µ ê°€ë“í•˜ì‹œê¸¸ ë°”ë¼ìš”!';
            }

            //const wishline = 
                //'ì´ë²ˆ ì¶”ì„ì—ëŠ” ' + wishes.join('/') + ' ê°€ë“í•˜ì‹œê¸¸ ë°”ë¼ìš”!';

             const text =
                 to + 'ê»˜, \n\n' + opening + '\n' + body + '\n' +
               wishline + '\n' + extra + '\n' + '\n' + today() + '\n' + from + ' ì˜¬ë¦¼';
          

            document.getElementById('letter').textContent = text; 
        }

        function copyLetter() {
            const t = document.getElementById("letter").textContent;

            if(!t.trim()){
                alert("ë¨¼ì € í¸ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”.")
                return;

            }
            navigator.clipboard.writeText(t).then(
                function(){
                    alert("í¸ì§€ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆì–´ìš”.")
                }).catch(function(){
                    alert("ë³µì‚¬ê°€ ì§€ì›ë˜ì§€ ì•Šì•„ìš”. ì§ì ‘ ë“œë˜ê·¸í•´ì„œ ë³µì‚¬í•˜ì„¸ìš”!")
                });
        }

        function printLetter() {
            if (!document.getElementById("letter").textContent.trim())
            alert("ë¨¼ì € í¸ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”!")
            return;

            window.print();
        }
        
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById('makeBtn').onclick = buildLetter;
            document.getElementById('copyBtn').onclick = copyLetter;
            document.getElementById('printBtn').onclick = printLetter;
        });
        
    </script>
</body>

</html>